# VibeSplit - Продуктовая стратегия MVP

## Executive Summary

### Elevator Pitch
VibeSplit - это современное веб-приложение с Progressive Web App (PWA) технологией, которое автоматически рассчитывает, кто кому сколько должен, когда друзья вместе тратят деньги. Приложение работает в браузере с возможностью установки на домашний экран как Android, так и iOS устройств.

### Problem Statement
**Основная проблема**: При совместных тратах в компаниях друзей/коллег (рестораны, поездки, покупки) возникают сложности с честным разделением расходов, что приводит к неловким ситуациям, конфликтам и недопониманиям.

**Болевые точки пользователей**:
- Сложные математические расчеты при неравномерных тратах
- Забывчивость участников о долгах и тратах
- Неловкость при напоминании о долгах
- Отсутствие прозрачности в расчетах
- Потеря чеков и забывание деталей трат

### Unique Selling Proposition
- **Кроссплатформенность PWA**: Одно приложение работает на всех устройствах - Android, iOS, десктоп
- **Установка без App Store**: Прямая установка на домашний экран с полной функциональностью
- **Простота**: Интуитивный mobile-first интерфейс без лишних функций
- **Честность**: Полная прозрачность расчетов с детализацией
- **Российская специфика**: Учет местных особенностей общения и культуры
- **Оффлайн-работа**: Service Workers обеспечивают работу без интернета
- **Нативный опыт**: Push-уведомления, работа в фоне, интеграция с ОС

### Success Metrics
- **Retention Rate**: 60%+ пользователей активны через месяц (объединенная метрика по платформам)
- **Engagement**: 3+ транзакции в неделю на активного пользователя
- **NPS**: 50+ (готовность рекомендовать)
- **User Acquisition**: 1000+ пользователей в первый месяц (80% мобильные устройства, 20% десктоп)
- **PWA Installation Rate**: 60%+ пользователей устанавливают PWA на домашний экран
- **Completion Rate**: 80%+ групп закрывают все долги

## Функциональные требования с описанием

### 1. Модуль аутентификации

**Регистрация пользователя**:
- Создание профиля: имя (обязательно), фото профиля (опционально)

**Авторизация**:
- Вход по логину и паролю

### 2. Модуль управления группами

**Создание группы**:
- Название группы (до 50 символов)
- Описание (опционально, до 200 символов)
- Валюта (RUB по умолчанию)
- Автоматическое добавление создателя как администратора

**Приглашение участников**:
- In-app приглашение через создание ссылки на присоединение

**Управление участниками**:
- Просмотр списка участников с балансами
- Удаление участников (только админ, если нет активных долгов)
- Выход из группы (если баланс = 0)

### 3. Модуль управления тратами

**Добавление траты**:
- Сумма (до 1 000 000 руб)
- Описание траты (до 100 символов)
- Выбор плательщика (из участников группы)
- Выбор участников, на которых делится трата
- Способы деления:
  - Поровну между всеми выбранными
  - Поровну между участниками кроме плательщика  
  - Неравномерно (ручной ввод сумм для каждого)
- Дата и время (автоматически, с возможностью редактирования)

**Валидация трат**:
- Сумма > 0 и ≤ 1 000 000
- Минимум 1 участник (кроме плательщика)
- Сумма распределения = общей сумме при неравномерном делении

### 4. Модуль расчета долгов

**Алгоритм расчета**:
- Расчет чистых балансов каждого участника
- Минимизация количества транзакций между должниками происходит на бекенде
- Округление до рублей (копейки к большему долгу)

**Отображение долгов**:
- Персональный баланс пользователя в каждой группе
- Детализация: кому должен / кто должен с суммами
- Общий баланс пользователя по всем группам
- История изменения балансов

### 5. Модуль погашения долгов

**Отметка о погашении**:
- Кнопка "Погасить долг". Нажатие приводит на страницу выбора среди всех людей кому пользователь должен. Можно выбрать с кем и сколько расплаиться.
- Комментарий к погашению (опционально)

### 6. Модуль истории и отчетности

**История трат**:
- Хронологический список всех трат в группе
- Фильтры: по дате, по участнику, по сумме
- Детали каждой траты: участники, суммы, время
- Поиск по описанию

## Non-Functional Requirements

### Производительность PWA
- Первая загрузка: < 3 сек на 3G
- Повторная загрузка: < 1 сек (кеширование)
- Отклик интерфейса: < 100мс
- Синхронизация при восстановлении сети: < 5 сек
- Поддержка работы с 50+ группами на пользователя
- Lighthouse Performance Score: > 90

### Масштабируемость
- Поддержка 1000+ активных пользователей в первый год
- Возможность роста до 10 000+ пользователей
- Архитектура должна поддерживать горизонтальное масштабирование

### Безопасность
- Шифрование всех данных при передаче (HTTPS/TLS 1.3)
- Хеширование PIN-кодов и чувствительных данных
- Аутентификация через JWT токены
- Валидация всех входных данных
- Защита от CSRF и SQL-инъекций

### Доступность
- Поддержка офлайн-режима для просмотра данных
- Синхронизация при восстановлении соединения
- Соответствие WCAG 2.1 AA для базовой доступности
- Поддержка голосового ввода для сумм

### Совместимость PWA
- **Мобильные браузеры**: Safari 14+ (iOS), Chrome 80+ (Android)
- **Десктоп браузеры**: Chrome 80+, Firefox 75+, Safari 14+, Edge 80+
- **PWA функции**: Service Workers, Web App Manifest, Push Notifications
- **Установка**: Поддержка "Add to Home Screen" на всех платформах
- **Отзывчивость**: 320px - 2560px+ (все современные устройства)
- **Локализация**: Русский язык

### Особенности PWA-решения

**Преимущества PWA**:
- **Универсальность**: Одно приложение для Android, iOS и десктоп
- **Низкие барьеры входа**: Не нужно скачивать из магазинов
- **Автоматические обновления**: Новые функции доступны сразу
- **Малый размер**: Меньше места на устройстве
- **Офлайн-работа**: Service Workers обеспечивают функциональность
- **Нативные возможности**: Push-уведомления, сохранение на домашний экран

### Ключевые UX принципы PWA
- **Mobile-First дизайн**: Приоритет мобильного опыта с адаптацией под большие экраны
- **Прогрессивное раскрытие**: Оптимальное количество информации на каждом шаге
- **Офлайн-первый подход**: Приложение работает при любом качестве сети
- **Быстрая загрузка**: Оптимизация под 2G/3G соединения
- **Обратная связь**: Четкие индикаторы состояния сети и синхронизации
- **Кроссплатформенность**: Единый UX на всех устройствах с адаптивными элементами

### Key User Flows

**Flow 1: Первое использование PWA**
1. Открытие ссылки в браузере → Быстрая загрузка PWA
2. Регистрация по логину паролю → Email подтверждение  
3. Краткий онбординг → Предложение установки PWA
4. Создание первой группы → Приглашение через ссылку
5. Добавление первой траты → Получение push-уведомления

**Flow 2: Добавление траты**
1. Выбор группы → Кнопка "Добавить трату"
2. Ввод суммы и описания → Выбор плательщика
3. Выбор участников → Способ деления
4. Подтверждение → Результат с обновленными балансами

**Flow 3: Погашение долга**
1. Просмотр долгов → Выбор долга для погашения
2. Подтверждение суммы → Отправка уведомления
3. Ожидание подтверждения → Обновление балансов

## Roadmap разработки

### Фаза 1: PWA Foundation (3-4 недели)
**Цель**: Создать базовую PWA инфраструктуру и core функциональность

**PWA инфраструктура** (1-2 недели):
- Настройка React проекта с TypeScript
- Конфигурация Web App Manifest
- Service Workers для офлайн-работы
- Основная система кеширования
- Настройка push-уведомлений

**Frontend разработка** (2-3 недели):
- Mobile-first responsive дизайн
- Настройка Mobx + React Query
- Основные страницы аутентификации
- Навигация на React Router
- Базовая система компонентов

### Фаза 2: Core Features (3-4 недели)
**Цель**: Реализовать основные пользовательские сценарии в PWA

**Неделя 1-2**:
- Создание и управление группами с мобильным UX
- Приглашение через веб-ссылки (без необходимости скачивания)
- Добавление трат с офлайн-поддержкой

**Неделя 3-4**:
- Расширенные опции деления с тач-френдли интерфейсом
- Реалтайм отображение долгов и балансов
- Погашение долгов с push-уведомлениями

### Фаза 3: PWA Polish & Testing (2-3 недели)
**Цель**: Полировка PWA и оптимизация под все платформы

**Неделя 1**:
- Адаптивная страница истории (мобильная + десктоп)
- Оптимизация push-уведомлений для всех платформ
- Улучшение UX редактирования трат

**Неделя 2-3**:
- Кросс-браузерное тестирование и фиксы
- Оптимизация Lighthouse метрик (Performance, SEO, Accessibility)
- Настройка домена и SSL-сертификатов
- Мониторинг и аналитика

### Фаза 4: PWA Launch & Feedback (1-2 недели)
**Цель**: Запуск PWA MVP и сбор обратной связи

- Beta-тестирование через веб-ссылку (низкие барьеры входа)
- Запуск на продакшен домене с HTTPS
- Мониторинг PWA метрик (Lighthouse, Web Vitals)
- Отслеживание статистики установок PWA
- Оптимизация на основе пользовательского поведения

### Общий timeline PWA: 8-12 недель

**Преимущества PWA подхода**:
- Одно приложение вместо трех (iOS + Android + Web)
- Низкие барьеры входа для пользователей
- Мгновенные обновления без магазинов приложений
- Меньше разработки и поддержки

## Backlog дополнительных фич (Post-MVP)

### Приоритет 1: Immediate Post-MVP (2-4 недели после запуска)

**Улучшение UX**:
- **Фотографии чеков**: Возможность прикреплять фото к тратам для подтверждения
- **Категории трат**: Классификация расходов (еда, транспорт, развлечения)
- **Шаблоны трат**: Быстрое добавление повторяющихся расходов

**Аналитика и отчеты**:
- **Детальная статистика**: Графики трат по времени, категориям, участникам
- **Экспорт данных**: PDF/Excel отчеты для налогов или личной отчетности
- **Бюджеты групп**: Установка лимитов трат для групп
- **Тренды расходов**: Анализ изменений в тратах группы

### Приоритет 2: Growth Features (1-3 месяца после MVP)

**Социальные функции**:
- **Комментарии к тратам**: Возможность обсуждения расходов
- **Эмодзи-реакции**: Быстрые реакции на траты (👍😱💸)
- **Активность в группе**: Лента активности участников
- **Рейтинг участников**: Геймификация с очками за пунктуальные выплаты

**Интеграции и автоматизация**:
- **Банковские интеграции**: Автоматический импорт трат с карт
- **Боты для мессенджеров**: Telegram/WhatsApp боты для быстрого добавления трат
- **Календарные события**: Создание групп для планируемых событий
- **API для партнеров**: Интеграция с ресторанами и сервисами доставки

### Приоритет 3: Advanced Features (3-6 месяцев после MVP)

**Финансовые инструменты**:
- **Мультивалютность**: Поддержка разных валют с автоконвертацией
- **Автоматические выплаты**: Интеграция с платежными системами

### Приоритет 4: Platform Expansion (6-12 месяцев после MVP)

**Новые платформы**:
- **Голосовые ассистенты**: Интеграция с Алисой и Google Assistant

**Международная экспансия**:
- **Локализация**: Перевод на английский и другие языки
- **Соответствие GDPR**: Приведение в соответствие с международными стандартами

## Технические ограничения и зависимости

### Критические зависимости PWA
- **HTTPS хостинг**: Обязательно для работы Service Workers и многих PWA функций
- **Web Push сервис**: Firebase Cloud Messaging для универсальных push-уведомлений
- **CDN**: Для быстрой загрузки по всему миру и кеширования
- **Аналитика**: Google Analytics 4 или Яндекс.Метрика для веб-аналитики

### Технические ограничения PWA
- **Офлайн-возможности**: Service Workers позволяют сохранять траты офлайн с последующей синхронизацией
- **Ограничения iOS Safari**: Некоторые PWA функции могут работать ограниченно
- **Размер кеша**: Ограничения браузеров на размер кеша (50-250 МБ)
- **Масштабирование**: CDN и оптимизация критичны для роста
- **Платежные интеграции**: Ограниченный доступ к NFC и некоторым платежным API

### Риски и митигация
**Высокий риск**:
- *Низкое удержание пользователей* → Фокус на onboarding и первую пользу в течение 5 минут
- *Конкуренция с Splitwise* → Акцент на российскую специфику и простоту

## Критерии готовности к релизу

### Обязательные критерии (Go/No-Go)
- [ ] Crash rate < 1% на всех поддерживаемых устройствах  
- [ ] Время загрузки приложения < 5 сек на медленных соединениях
- [ ] Безопасность: все API защищены, данные зашифрованы
- [ ] Базовая аналитика настроена и работает

### Желательные критерии  
- [ ] Beta-тест с 10+ пользователями показал NPS > 30
- [ ] Поддержка основных Android и iOS версий (покрытие 95% устройств)

---

## Заключение

Данная стратегия сфокусирована на решении реальной проблемы российских пользователей - честном и прозрачном разделении совместных расходов. **Переход на PWA-подход** существенно упрощает разработку и обеспечивает кроссплатформенность.

Ключевые факторы успеха PWA-решения:
- **Кроссплатформенность**: Одно приложение для Android, iOS и десктоп
- **Низкие барьеры входа**: Не нужно скачивать из магазинов приложений
- **Мгновенные обновления**: Новые функции доступны сразу всем пользователям
- **Офлайн-работа**: Service Workers обеспечивают стабильную работу
- **Российская специфика**: Учет особенностей местной культуры общения

Следующие шаги для PWA-реализации:
1. Валидация PWA-подхода через интервью с 20+ потенциальными пользователями
2. Обновление технического задания с учетом React + PWA стека
3. Настройка PWA-инфраструктуры (хостинг, HTTPS, CDN)
4. Подготовка стратегии запуска через веб-ссылку

## Основные преимущества перехода на PWA

Переход от мобильного приложения к PWA обеспечивает:

### Бизнес-преимущества:
- **Сокращение сроков разработки**: 8-12 недель вместо 15+
- **Меньше рисков**: Одна кодовая база вместо трех
- **Мгновенные обновления**: Не нужно ждать модерации в App Store
- **Меньшая стоимость поддержки**: Одна команда вместо нескольких

### Пользовательские преимущества:
- **Мгновенный доступ**: Переход по ссылке сразу открывает приложение
- **Экономия места**: PWA занимает меньше места на устройстве
- **Автоматические обновления**: Новые функции появляются сразу
- **Кроссплатформенность**: Одинаковый опыт на всех устройствах

### Маркетинговые преимущества:
- **Простое распространение**: Обмен ссылкой в мессенджерах
- **SEO-оптимизация**: Поисковые системы могут индексировать контент
- **Легкость тестирования**: A/B тесты можно запускать мгновенно
- **Глобальная доступность**: Нет географических ограничений магазинов приложений